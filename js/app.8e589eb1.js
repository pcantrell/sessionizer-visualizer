(function(e){function t(t){for(var n,r,a=t[0],c=t[1],l=t[2],h=0,d=[];h<a.length;h++)r=a[h],o[r]&&d.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],n=!0,a=1;a<s.length;a++){var c=s[a];0!==o[c]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},o={app:0},i=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/sessionizer-visualizer/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"5c0b":function(e,t,s){"use strict";var n=s("5e27"),o=s.n(n);o.a},"5e27":function(e,t,s){},"83af":function(e,t,s){},a952:function(e,t,s){"use strict";var n=s("83af"),o=s.n(n);o.a},cd49:function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"schedule"},[s("table",{class:{"schedule-grid":!0,"focus-enabled":e.focus}},[s("tr",{staticClass:"top-header"},[s("td",{staticClass:"placeholder"}),e._l(e.schedule.sessions,function(t){return s("th",[e._v("\n            "+e._s(t.name)+"\n        ")])})],2),e._l(e.schedule.timeslots,function(t,n){return s("tr",{staticClass:"timeslot"},[s("th",[e._v(e._s(t))]),e._l(e.schedule.sessions,function(t,o){return s("td",{class:{selected:t.timeslotID===n,focused:t.timeslotID===n&&e.isSessionFocused(o)},on:{click:function(e){t.timeslotID=n}}})}),e.options.showFocusedShape&&e.focus?s("td",{staticClass:"focused placeholder"},[s("div",{staticClass:"big shape-block-row"},e._l(e.schedule.groupedSessions(e.focus)[n],function(t){return s("div",{staticClass:"big shape-block"},[e.options.showRanking?s("div",{staticClass:"ranking"},[e._v("\n                "+e._s(e.focus.votes.indexOf(e.schedule.sessions.indexOf(t))+1)+"\n              ")]):e._e()])}),0)]):e._e()],2)}),s("tr",{staticClass:"top-header"},[s("td",{staticClass:"placeholder"}),e._l(e.schedule.sessions,function(t,n){return s("th",{class:{focused:e.isSessionFocused(n)}},[e._v("\n            "+e._s(t.name)+"\n        ")])})],2),e._l(e.schedule.participants,function(t){return s("tr",{class:{participant:!0,focused:e.focus===t}},[s("th",{on:{click:function(s){return e.toggleFocus(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")]),e._l(e.schedule.sessions,function(n,o){return s("td",{class:{vote:!0,selected:t.votes.includes(o)},on:{click:function(e){return t.toggleVote(o)}}},[e._v("\n          "+e._s(e.schedule.timeslots[n.timeslotID])+"\n        ")])}),e.options.showNaiveScores?[s("td",{staticClass:"scoring numeric naive"},[e._v("\n            "+e._s(e.schedule.naiveScore(t))+"\n          ")]),s("td",{staticClass:"scoring numeric naive naive-percent"},[t.votes.length>0?s("span",[e._v("\n              "+e._s(e.schedule.naivePercent(t))+"%\n            ")]):e._e()])]:e._e(),e.options.showMiniShapes?s("td",{staticClass:"scoring"},e._l(e.schedule.timeslots,function(n,o){return s("div",{staticClass:"small shape-block-row"},e._l(e.schedule.groupedSessions(t)[o],function(e){return s("div",{staticClass:"small shape-block"})}),0)}),0):e._e(),e.options.showShapeScores?[s("td",{staticClass:"scoring numeric shape"},[e._v("\n            "+e._s(e.formatFixed(e.schedule.shapeScore(t),3))+"\n          ")])]:e._e()],2)}),s("tr",{staticClass:"totals"},[s("td",{staticClass:"placeholder"}),e._l(e.schedule.sessions,function(t,n){return s("td",[e._v("\n          "+e._s(e.schedule.voteCount(n))+"\n        ")])}),e.options.showNaiveScores?[s("td",{staticClass:"scoring numeric naive"},[e._v("\n            "+e._s(e.formatFixed(e.schedule.averageScore(e.schedule.naiveScore),1))+"\n          ")]),s("td",{staticClass:"scoring numeric naive naive-percent"},[e._v("\n            "+e._s(e.formatFixed(e.schedule.averageScore(e.schedule.naivePercent),0))+"%\n          ")])]:e._e(),e.options.showMiniShapes?s("td",{staticClass:"placeholder"}):e._e(),e.options.showShapeScores?[s("td",{staticClass:"scoring numeric shape"},[e._v("\n            "+e._s(e.formatFixed(e.schedule.averageScore(e.schedule.shapeScore),3))+"\n            "),e.annealer.bestScore>0?s("div",{staticClass:"best"},[s("div",{staticClass:"side-label"},[e._v("\n                Best:\n              ")]),s("div",{class:{score:!0,"new-record":e.newRecord}},[e._v("\n                "+e._s(e.formatFixed(e.annealer.bestScore,3))+"\n              ")])]):e._e()])]:e._e()],2)],2)]),e.options.showPairs?s("div",{staticClass:"complaint-pairs"},e._l(e.schedule.participants,function(t){return s("div",e._l(e.schedule.groupedSessions(t),function(n){return s("div",e._l(n,function(o,i){return s("div",e._l(n.slice(i+1),function(n){return s("div",{staticClass:"complaint"},[e._v("\n            ☹️ "),s("b",[e._v(e._s(t.name))]),e._v(": "+e._s(o.name)+" vs "+e._s(n.name)+"\n          ")])}),0)}),0)}),0)}),0):e._e(),s("div",{staticClass:"control-panel"},[s("button",{on:{click:function(t){return e.schedule.clear()}}},[e._v("clear")]),s("button",{on:{click:function(t){return e.schedule.randomizeSlots()}}},[e._v("rand slots")]),s("button",{on:{click:function(t){return e.schedule.randomizeVotes()}}},[e._v("rand votes")]),s("Toggle",{attrs:{label:"pairs"},model:{value:e.options.showPairs,callback:function(t){e.$set(e.options,"showPairs",t)},expression:"options.showPairs"}}),s("Toggle",{attrs:{label:"naive"},model:{value:e.options.showNaiveScores,callback:function(t){e.$set(e.options,"showNaiveScores",t)},expression:"options.showNaiveScores"}}),s("Toggle",{attrs:{label:"focused shape"},model:{value:e.options.showFocusedShape,callback:function(t){e.$set(e.options,"showFocusedShape",t)},expression:"options.showFocusedShape"}}),s("Toggle",{attrs:{label:"mini shapes"},model:{value:e.options.showMiniShapes,callback:function(t){e.$set(e.options,"showMiniShapes",t)},expression:"options.showMiniShapes"}}),s("Toggle",{attrs:{label:"rank"},model:{value:e.options.showRanking,callback:function(t){e.$set(e.options,"showRanking",t)},expression:"options.showRanking"}}),s("button",{on:{click:function(t){return e.schedule.randomizeRanks()}}},[e._v("rand rank")]),s("Toggle",{attrs:{label:"scores"},model:{value:e.options.showShapeScores,callback:function(t){e.$set(e.options,"showShapeScores",t)},expression:"options.showShapeScores"}}),s("button",{on:{click:function(t){return e.annealer.toggle()}}},[e._v("anneal")])],1)])},i=[],r=(s("6762"),s("2fdb"),s("d225")),a=s("b0b4"),c=s("308d"),l=s("6bb5"),u=s("4e2b"),h=s("9ab4"),d=s("60a3"),f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",[s("input",{attrs:{type:"checkbox",id:e.id},domProps:{checked:e.value},on:{change:function(t){return e.$emit("input",t.target.checked)}}}),s("label",{attrs:{for:e.id}},[e._v(e._s(e.label))])])},v=[],p=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.id="toggle-"+Math.random(),e}return Object(u["a"])(t,e),t}(d["c"]);h["a"]([Object(d["b"])()],p.prototype,"value",void 0),h["a"]([Object(d["b"])()],p.prototype,"label",void 0),p=h["a"]([d["a"]],p);var m=p,b=m,g=(s("a952"),s("2877")),y=Object(g["a"])(b,f,v,!1,null,"129d86c0",null),S=y.exports,_=(s("ac4d"),s("8a81"),s("ac6a"),function e(t){Object(r["a"])(this,e),this.timeslotID=void 0,this.name=t}),w=function(){function e(t){Object(r["a"])(this,e),this.votes=[],this.name=t}return Object(a["a"])(e,[{key:"toggleVote",value:function(e){this.votes.includes(e)?this.votes=this.votes.filter(function(t){return t!==e}):this.votes.push(e)}}]),e}(),k=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,null,[{key:"randomIntLessThan",value:function(e){return Math.floor(Math.random()*e)}},{key:"randomInt",value:function(e,t){return this.randomIntLessThan(t-e)+e}},{key:"shuffle",value:function(e){var t=this;e.forEach(function(s,n){var o=t.randomInt(n,e.length),i=[e[o],e[n]];e[n]=i[0],e[o]=i[1]}),e.push(e.pop())}},{key:"sample",value:function(e){return e[this.randomIntLessThan(e.length)]}}]),e}(),x=function(){function e(t){Object(r["a"])(this,e),this.participants=t.participants.map(function(e){return new w(e)}),this.sessions=t.sessions.map(function(e){return new _(e)}),this.timeslots=t.timeslots}return Object(a["a"])(e,[{key:"randomizeSlots",value:function(){var e=!0,t=!1,s=void 0;try{for(var n,o=this.sessions[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;i.timeslotID=Math.floor(Math.random()*this.timeslots.length)}}catch(r){t=!0,s=r}finally{try{e||null==o.return||o.return()}finally{if(t)throw s}}}},{key:"randomizeVotes",value:function(){var e=this,t=!0,s=!1,n=void 0;try{for(var o,i=function(){var t=o.value,s=.5*Math.random()+.1;t.votes=e.sessions.map(function(e,t){return t}).filter(function(e){return Math.random()<s})},r=this.participants[Symbol.iterator]();!(t=(o=r.next()).done);t=!0)i()}catch(a){s=!0,n=a}finally{try{t||null==r.return||r.return()}finally{if(s)throw n}}}},{key:"randomizeRanks",value:function(){var e=!0,t=!1,s=void 0;try{for(var n,o=this.participants[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;k.shuffle(i.votes)}}catch(r){t=!0,s=r}finally{try{e||null==o.return||o.return()}finally{if(t)throw s}}}},{key:"clear",value:function(){var e=!0,t=!1,s=void 0;try{for(var n,o=this.sessions[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;i.timeslotID=void 0}}catch(d){t=!0,s=d}finally{try{e||null==o.return||o.return()}finally{if(t)throw s}}var r=!0,a=!1,c=void 0;try{for(var l,u=this.participants[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var h=l.value;h.votes=[]}}catch(d){a=!0,c=d}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}}},{key:"groupedSessions",value:function(e){var t=this.timeslots.map(function(e){return[]}),s=!0,n=!1,o=void 0;try{for(var i,r=e.votes[Symbol.iterator]();!(s=(i=r.next()).done);s=!0){var a=i.value,c=this.sessions[a];void 0!==c.timeslotID&&t[c.timeslotID].push(c)}}catch(l){n=!0,o=l}finally{try{s||null==r.return||r.return()}finally{if(n)throw o}}return t}},{key:"voteCount",value:function(e){return this.participants.filter(function(t){return t.votes.includes(e)}).length}},{key:"naiveScore",value:function(e){return this.groupedSessions(e).filter(function(e){return e.length>0}).length}},{key:"naivePercent",value:function(e){return Math.round(this.naiveScore(e)/e.votes.length*100)}},{key:"shapeScore",value:function(e){var t=e.votes.length;if(0===t)return null;var s=0,n=!0,o=!1,i=void 0;try{for(var r,a=this.groupedSessions(e)[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value;s+=2*c.length/(t*(c.length+1))}}catch(l){o=!0,i=l}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return s}},{key:"averageScore",value:function(e){var t=0,s=0,n=!0,o=!1,i=void 0;try{for(var r,a=this.participants[Symbol.iterator]();!(n=(r=a.next()).done);n=!0){var c=r.value,l=e.bind(this)(c);l&&!isNaN(l)&&(t+=l,s+=1)}}catch(u){o=!0,i=u}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return 0===s?null:t/s}}]),e}(),O=function(){function e(t,s){Object(r["a"])(this,e),this.running=!1,this.bestScore=0,this.bestSchedule=[],this.iters=0,this.maxIters=1e3,this.schedule=t,this.maxIters=s.maxIters}return Object(a["a"])(e,[{key:"clear",value:function(){this.bestScore=0,this.bestSchedule=[]}},{key:"toggle",value:function(){this.running?this.stop():this.start()}},{key:"start",value:function(){this.running=!0,this.bestScore=this.schedule.averageScore(this.schedule.shapeScore)||0,this.bestSchedule=this.extractTimeslotIDs(),this.iters=0,this.step()}},{key:"stop",value:function(){var e=this;this.running=!1,this.bestSchedule.forEach(function(t,s){e.schedule.sessions[s].timeslotID=t})}},{key:"step",value:function(){var e=this;if(this.running){var t=this.schedule.averageScore(this.schedule.shapeScore)||0,s=k.sample(this.schedule.sessions),n=s.timeslotID;s.timeslotID=k.randomIntLessThan(this.schedule.timeslots.length);var o=this.schedule.averageScore(this.schedule.shapeScore)||0;o>this.bestScore?(this.bestScore=o,this.bestSchedule=this.extractTimeslotIDs()):o<t&&Math.random()<this.iters/this.maxIters&&(s.timeslotID=n),this.iters+=1,this.iters>this.maxIters&&(this.stop(),this.start()),setTimeout(function(){return e.step()},1)}}},{key:"extractTimeslotIDs",value:function(){return this.schedule.sessions.map(function(e){return e.timeslotID})}}]),e}(),j=function(e){function t(){var e;return Object(r["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).call(this)),e.schedule=new x({participants:["Sally","Fred","Irene","Harry","Prudence","Juan","Vicky","Yusuf","Alvin"],sessions:["👻","👾","🦷","👣","🧚🏽‍♀️","🐋","🌈","🌮","🧿","🧷","💃🏻","🧩"],timeslots:["1:00","2:00","3:00","4:00"]}),e.focus=null,e.options={showNaiveScores:!1,showFocusedShape:!1,showMiniShapes:!1,showRanking:!1,showPairs:!1,showShapeScores:!1},e.annealer=new O(e.schedule,{maxIters:1e3}),e.newRecord=!1,setTimeout(function(){},.2),e}return Object(u["a"])(t,e),Object(a["a"])(t,[{key:"formatFixed",value:function(e,t){if(e)return e.toFixed(t)}},{key:"toggleFocus",value:function(e){this.focus=this.focus===e?null:e}},{key:"isSessionFocused",value:function(e){return this.focus&&this.focus.votes.includes(e)||!1}},{key:"onNewBestScore",value:function(e,t){var s=this;t&&(this.newRecord=!1,setTimeout(function(){return s.newRecord=!0},.01))}},{key:"onVotesChanged",value:function(e,t){this.annealer.clear()}}]),t}(d["c"]);h["a"]([Object(d["d"])("annealer.bestScore")],j.prototype,"onNewBestScore",null),h["a"]([Object(d["d"])("schedule.participants",{deep:!0})],j.prototype,"onVotesChanged",null),j=h["a"]([Object(d["a"])({components:{Toggle:S}})],j);var C=j,I=C,T=(s("5c0b"),Object(g["a"])(I,o,i,!1,null,null,null)),M=T.exports;n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(M)}}).$mount("#app")}});
//# sourceMappingURL=app.8e589eb1.js.map